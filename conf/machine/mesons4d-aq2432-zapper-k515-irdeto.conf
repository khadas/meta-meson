#@TYPE: Machine
#@NAME: meson

#@DESCRIPTION: Machine configuration for meson systems

include conf/machine/include/mesons4_k5.15_32b.inc
include conf/machine/include/amlogic_nogpu.inc


MACHINE_ESSENTIAL_EXTRA_RRECOMMENDS += " \
        aucpu-fw \
        tuner-prebuilt \
        "

CHIPSET_NAME = "S805C3"
KERNEL_DEVICETREE = "s4d_s805c3_aq2432_256m.dtb s4d_s805c3_t215_256m.dtb"
#KERNEL_DEVICETREE = "s4d_s805c3_aq2432_512m.dtb s4d_s805c3_t215_512m.dtb"
UBOOT_MACHINE = "s4_aq2432_config"

DISTRO_FEATURES_append = " kernel_515"
DISTRO_FEATURES_append = " nand"
DISTRO_FEATURES_append = " irdeto "
ROOTFS_TYPE = "squashfs"

KERNEL_MODULE_AUTOLOAD += " amlogic-fs-yaffs"
KERNEL_MODULE_AUTOLOAD += " amlogic-socinfo"
KERNEL_MODULE_AUTOLOAD += " amlogic-snd-soc"
KERNEL_MODULE_AUTOLOAD += " amlogic-snd-codec-t9015"
KERNEL_MODULE_AUTOLOAD += " cxd2856_fe_32 r836_fe_32 av2018_fe_32 "

DISTRO_FEATURES_append = " secure-u-boot optee "
DISTRO_FEATURES_append = " alsa "
DISTRO_FEATURES_BACKFILL_CONSIDERED = "sysvinit"
DEFAULT_DISTRO_FEATURES += " systemd"
DISTRO_FEATURES_append = " systemd"
DISTRO_FEATURES_append = " aml-dtv "
DISTRO_FEATURES_append = " amlogic-dvb "
DISTRO_FEATURES_append = " zapper "
DISTRO_FEATURES_append = " zapper-reference "
DISTRO_FEATURES_append = " dfb "
DISTRO_FEATURES_append = " swupdate "

DISTRO_FEATURES_remove = " sysvinit"
DISTRO_FEATURES_remove = " bluetooth wifi ipv6 ipvsec nfc nfs 3g smbfs ppp zeroconf "
DISTRO_FEATURES_remove = " acl xattr pam selinux"

MACHINE_FEATURES_remove = " phone pci pcmcia "

TDK_VERSION_s4 = "v3.8/dev/S805C3"
OVERRIDES .= ":aq2432"
MACHINEOVERRIDES .= ":client"

