#@TYPE: Machine
#@NAME: meson

#@DESCRIPTION: Machine configuration for meson systems

include conf/machine/include/mesons4_k5.4_32b.inc
#include conf/machine/include/mesons4_k5.4_64b.inc

include conf/machine/mesons4-westeros.inc

CHIPSET_NAME = "S805X2"
KERNEL_DEVICETREE = "s4_s805x2_aq222_linux_nand_512m.dtb"
UBOOT_MACHINE = "s4_aq222_config"

OVERRIDES .= ":aq222"
TDK_VERSION:s4 = "v3.8/dev/S805X2"

MACHINE_EXTRA_RRECOMMENDS:remove = " wififw-qca6174 qca6174"
KERNEL_MODULE_AUTOLOAD:remove = " btqca "
KERNEL_MODULE_PROBECONF:remove = " btqca "

MACHINE_EXTRA_RRECOMMENDS:append = " aml-wifi-w1 aml-bt-w1"
DISTRO_FEATURES:remove = " bt-qca "
DISTRO_FEATURES:append = " aml-w1 "

DISTRO_FEATURES:append = " UI_720P low-memory "
DISTRO_FEATURES:append = " appmanager "
DISTRO_FEATURES:append = " zapperplus "
DISTRO_FEATURES:append = " nand "
DISTRO_FEATURES:append = " webkitbrowser "
ROOTFS_TYPE = "squashfs"
DM_VERITY_IMAGE_TYPE = "squashfs"

DISTRO_FEATURES:remove = " tts "
DISTRO_FEATURES:remove = " bluetooth bluez5 "
DISTRO_FEATURES:append = " remove-test-files"

ZRAM_FRACTION = "50"

# For YouTube Cert. Now it's for 2023
DEVICE_PROPERTY_PERSIST_YOUTUBE_TOTAL_CPU_MEMORY = "0xAA00000"
DEVICE_PROPERTY_PERSIST_YOUTUBE_GST_APPSRC_VIDEO_SIZE = "0x400000"
DEVICE_PROPERTY_PERSIST_YOUTUBE_GST_APPSRC_AUDIO_SIZE = "0x100000"
DEVICE_PROPERTY_PERSIST_YOUTUBE_VIDEOSINK_LOWMEM = "y"
DEVICE_PROPERTY_PERSIST_YOUTUBE_SECMEM_SIZE_THRESHOLD = "0x20000"
DEVICE_PROPERTY_PERSIST_YOUTUBE_AUDIO_BUFFERING_LOW_LEVEL = "150000000"
DEVICE_PROPERTY_PERSIST_YOUTUBE_AUDIO_BUFFERING_HIGH_LEVEL = "350000000"
DEVICE_PROPERTY_PERSIST_YOUTUBE_VIDEO_BUFFERING_LOW_LEVEL = "150000000"
DEVICE_PROPERTY_PERSIST_YOUTUBE_VIDEO_BUFFERING_HIGH_LEVEL = "350000000"
# End For YouTube
