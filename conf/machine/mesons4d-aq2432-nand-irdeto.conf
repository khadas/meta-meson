include conf/machine/mesons4d-aq2432-common.inc

KERNEL_DEVICETREE = "s4d_s805c3_aq2432_512m.dtb s4d_s805c3_t215_512m.dtb"

DISTRO_FEATURES_append = " irdeto "
DISTRO_FEATURES_append = " nand "
ROOTFS_TYPE = "squashfs"
DM_VERITY_IMAGE_TYPE = "squashfs"

# AVB and chained partition
DISTRO_FEATURES_append = " AVB dm-verity AVB_chained_partition "
DEVICE_PROPERTY_BOOT_PARTITION_SIZE = "0x2200000"
DEVICE_PROPERTY_VBMETA_ROLLBACK_INDEX = "0"
DEVICE_PROPERTY_SYSTEM_ROLLBACK_LOCATION = "1"
DEVICE_PROPERTY_VENDOR_ROLLBACK_LOCATION = "2"
# For AVB2 chained partition, the actual signing and root hash information
# are stored in the AVB2 footer of the partition
# Libavb in U-Boot will look at the end of the partition to look for footer.
# Therefore, exact size of the partition has to be specified.
DEVICE_PROPERTY_SYSTEM_PARTITION_SIZE = "0xE000000"
DEVICE_PROPERTY_VENDOR_PARTITION_SIZE = "0x1000000"
DISTRO_FEATURES_append = " recovery AVB_recovery_partition "
DEVICE_PROPERTY_RECOVERY_ROLLBACK_LOCATION = "3"
DEVICE_PROPERTY_RECOVERY_PARTITION_SIZE = "0x2000000"
# Rollback indexes for system and vendor are supported only if chained.
# Nand cannot support AVB rollback index due to lack of rpmb support.
# The configuration is just for passing compilation and has no effect on the system.
DEVICE_PROPERTY_SYSTEM_ROLLBACK_INDEX = "0"
DEVICE_PROPERTY_VENDOR_ROLLBACK_INDEX = "0"
# For recovery, it is always chained if enabled.
DEVICE_PROPERTY_RECOVERY_ROLLBACK_INDEX = "0"
