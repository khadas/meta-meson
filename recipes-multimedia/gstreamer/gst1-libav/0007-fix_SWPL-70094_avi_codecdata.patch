diff --git a/ext/libav/gstavdemux.c b/ext/libav/gstavdemux.c
old mode 100644
new mode 100755
index 7fbb339..7ba2544
--- a/ext/libav/gstavdemux.c
+++ b/ext/libav/gstavdemux.c
@@ -966,8 +966,10 @@ gst_ffmpegdemux_get_stream (GstFFMpegDemux * demux, AVStream * avstream)
   caps = gst_ffmpeg_codecid_to_caps (ctx->codec_id, ctx, TRUE);
   if (caps == NULL)
     goto unknown_caps;
-  else if (!strcmp(demux->context->iformat->name, "mpegts")
+  else if ((!strcmp(demux->context->iformat->name, "mpegts")
        && (AV_CODEC_ID_H264 == ctx->codec_id || AV_CODEC_ID_HEVC == ctx->codec_id))
+       || (!strcmp(demux->context->iformat->name, "avi")
+       && (AV_CODEC_ID_H264 == ctx->codec_id)))
       {
         GstStructure *structure;
         structure =  gst_caps_get_structure (caps, 0);
